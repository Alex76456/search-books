(this["webpackJsonpsearch-books"]=this["webpackJsonpsearch-books"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),o=n(5),a=n.n(o),i=(n(13),n(4)),r=n.n(i),l=n(6),p=n(2),u=n(7),j=n(8),b=new(function(){function e(t){Object(u.a)(this,e),this._url=t.baseUrl}return Object(j.a)(e,[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getSnippets",value:function(e){return fetch("http://".concat(this._url,"/search.json?q=").concat(e)).then(this._getResponse).catch((function(e){console.error(e)}))}},{key:"getSnippetImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"L";return fetch("http://covers.".concat(this._url,"/b/id/").concat(e,"-").concat(t,".jpg")).then(this._getResponse).catch((function(e){console.error(e)}))}}]),e}())({baseUrl:"openlibrary.org"}),h=(n(15),n(16),n(0));var d=function(){return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)("img",{className:"header__logo",src:"https://cdn4.iconfinder.com/data/icons/science-and-technology-3-10/65/135-128.png",alt:"logo"}),Object(h.jsxs)("h1",{className:"header__title",children:["\u041d\u0430\u0439\u0442\u0438 \u0432",Object(h.jsx)("span",{class:"header__title-accent",children:"s"}),"\u0451!"]})]})};n(18),n(19);var m=function(e){var t=e.snippet,n=e.onBookClick;return Object(h.jsxs)("li",{className:"snippets__list-item",onClick:function(){n(t)},children:[Object(h.jsx)("img",{className:"snippets__image",src:t.cover_i?"http://covers.openlibrary.org/b/id/".concat(t.cover_i,"-M.jpg"):"https://missefficiency.nl/contents/media/l_naslagwerk_20171107144603.jpg",alt:t.name}),Object(h.jsxs)("div",{className:"snippets__container",children:[Object(h.jsx)("h2",{className:"snippets__snippet-title",children:t.title}),Object(h.jsx)("p",{className:"snippets__author",children:t.author_name})]})]})};var _=function(e){var t=e.onSnippetClick,n=e.snippets,c=e.onSearch,o=e.isRender,a=e.isSuccessImage,i=Object(s.useState)(""),r=Object(p.a)(i,2),l=r[0],u=r[1],j=Object(s.useState)(),b=Object(p.a)(j,2),d=b[0],_=b[1],f=Object(s.useState)(9),O=Object(p.a)(f,2),g=O[0],x=O[1];return Object(s.useEffect)((function(){""===l&&clearTimeout(d)}),[l,d]),Object(h.jsxs)("main",{className:"main",children:[Object(h.jsx)("section",{className:"search",children:Object(h.jsxs)("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),c(l.replace(/ /g,"+")),u("")},noValidate:!0,children:[Object(h.jsx)("label",{className:"search__form-field",children:Object(h.jsx)("input",{className:"search__input",type:"url",name:"search-input",placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",required:!0,value:l,onChange:function(e){u((function(t){return e.target.value})),clearTimeout(d),_(setTimeout((function(){c(l.replace(/ /g,"+"))}),1e3))}})}),Object(h.jsx)("button",{className:"search__submit",type:"submit",disabled:""===l,children:"\u041f\u043e\u0438\u0441\u043a"})]})}),Object(h.jsxs)("section",{className:"snippets",children:[Object(h.jsx)("h2",{className:"snippets__title",children:o?"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a...":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430:"}),!a&&Object(h.jsx)("img",{className:"snippets__success-image",src:"https://giklive.com/wp-content/uploads/2017/09/travolta-confused.gif",alt:"\u043a\u043d\u0438\u0433\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(h.jsx)("ul",{className:"snippets__list",children:n.map((function(e,n){return n<=g&&Object(h.jsx)(m,{snippet:e,onBookClick:t},n)}))}),n.length>g&&Object(h.jsx)("button",{className:"snippets__help-button",type:"button",onClick:function(){x(g+4)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435..."}),window.pageYOffset>600&&Object(h.jsx)("button",{className:"snippets__help-button",type:"button",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"})]})]})};n(20);var f=function(e){var t=e.book,n=e.isOpen,c=e.onClose,o=e.onEscClose;return Object(s.useEffect)((function(){if(n){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[n,c]),Object(h.jsx)("div",{className:"popup popup_type_book  ".concat(n&&"popup_opened"),onClick:o,children:Object(h.jsxs)("div",{className:"popup__content",children:[Object(h.jsx)("button",{type:"button",className:"popup__close",onClick:c}),Object(h.jsx)("img",{className:"popup__image",src:t.cover_i?"http://covers.openlibrary.org/b/id/".concat(t.cover_i,"-L.jpg"):"https://missefficiency.nl/contents/media/l_naslagwerk_20171107144603.jpg",alt:t.title}),Object(h.jsxs)("h2",{className:"popup__book-title",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",t.title]}),Object(h.jsxs)("h3",{className:"popup__book-author",children:["\u0410\u0432\u0442\u043e\u0440: ",t.author_name]}),Object(h.jsxs)("p",{className:"popup__book-publish",children:["\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438: ",t.publish_year]}),Object(h.jsxs)("p",{className:"popup__book-publisher",children:["\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c: ",t.publisher]}),Object(h.jsxs)("p",{className:"popup__book-isbn",children:["ISBN \u043a\u043d\u0438\u0433\u0438: ",t.isbn]})]})})};n(21);var O=function(){return Object(h.jsx)("footer",{className:"footer",children:Object(h.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Aleksey Logvenkin"]})})};var g=function(){var e=Object(s.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(!1),a=Object(p.a)(o,2),i=a[0],u=a[1],j=Object(s.useState)({}),m=Object(p.a)(j,2),g=m[0],x=m[1],v=Object(s.useState)(!1),k=Object(p.a)(v,2),N=k[0],y=k[1],S=Object(s.useState)(!0),C=Object(p.a)(S,2),w=C[0],E=C[1];function L(){u(!1),x({})}function F(){return(F=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,b.getSnippets(t);case 3:n=e.sent,console.log(n.numFound),E(n.numFound>0),c(n.docs),y(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"root",children:Object(h.jsxs)("div",{className:"page",children:[Object(h.jsx)(d,{}),Object(h.jsx)(_,{snippets:n,onSnippetClick:function(e){x(e),u(!0)},onSearch:function(e){return F.apply(this,arguments)},isRender:N,isSuccessImage:w}),Object(h.jsx)(O,{}),Object(h.jsx)(f,{book:g,isOpen:i,onClose:L,onEscClose:function(e){e.target.classList.contains("popup")&&L()}})]})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),o(e),a(e)}))};a.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),x()}],[[22,1,2]]]);
//# sourceMappingURL=main.665bd4e7.chunk.js.map